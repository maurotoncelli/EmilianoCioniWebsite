---
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
}

const { 
  title = 'EMILIANO CIONI | Master Blacksmith',
  description = 'Artigiano del ferro, maestro stalliere. Dalle scuderie di Lajatico alle collezioni private più esclusive.'
} = Astro.props;
---

<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={description}>
  <title>{title}</title>
  
  <!-- FAVICON & ICONS -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#050505">
  <link rel="apple-touch-icon" href="/favicon.svg">
  
  <!-- OPEN GRAPH -->
  <meta property="og:type" content="website">
  <meta property="og:url" content={Astro.url}>
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:image" content={new URL('/og-image.svg', Astro.url)}>
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="it_IT">
  <meta property="og:site_name" content="Emiliano Cioni">
  
  <!-- SEO EXTRAS -->
  <meta name="author" content="Emiliano Cioni">
  <meta name="keywords" content="fabbro, artigiano, ferro battuto, sculture, design, arte, Lajatico, Toscana">
  <link rel="canonical" href={Astro.url}>
  
  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  
  <!-- GSAP & LENIS -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
  
  <!-- STRUCTURED DATA (JSON-LD) -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Emiliano Cioni",
      "jobTitle": "Master Blacksmith & Artist",
      "description": "Artigiano del ferro, maestro stalliere. Dalle scuderie di Lajatico alle collezioni private più esclusive.",
      "url": {Astro.url.origin},
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Lajatico",
        "addressRegion": "Toscana",
        "addressCountry": "IT"
      },
      "worksFor": {
        "@type": "Organization",
        "name": "Studio Emiliano Cioni"
      },
      "knowsAbout": ["Blacksmithing", "Iron Sculpture", "Metal Art", "Design", "Craftsmanship"]
    }
  </script>
</head>
<body>
  <!-- CUSTOM CURSOR -->
  <div class="cursor-dot"></div>
  <div class="cursor-outline"></div>

  <!-- GRAIN & VIGNETTE -->
  <div class="grain"></div>
  <div class="vignette"></div>

  <!-- SLOT FOR PAGE CONTENT -->
  <slot />

  <!-- CUSTOM CURSOR SCRIPT -->
  <script is:inline>
    // CUSTOM CURSOR
    const cursorDot = document.querySelector('.cursor-dot');
    const cursorOutline = document.querySelector('.cursor-outline');
    
    window.addEventListener('mousemove', (e) => {
      const posX = e.clientX;
      const posY = e.clientY;
      cursorDot.style.left = `${posX}px`;
      cursorDot.style.top = `${posY}px`;
      cursorOutline.animate(
        { left: `${posX}px`, top: `${posY}px` },
        { duration: 500, fill: 'forwards' }
      );
    });

    // HOVER STATES
    function bindCursorHover() {
      const interactiveElements = document.querySelectorAll(
        'a, button, .hw-visual, .grid-item, .nav-item, .do-close, .video-box-improved, #scroll-top-btn, label, input, .cursor-hover'
      );
      interactiveElements.forEach((el) => {
        el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
        el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
      });
    }
    bindCursorHover();

    // INIT (wait for deferred libs)
    window.addEventListener('load', () => {
      // LENIS SMOOTH SCROLL INIT
      let lenis;
      if (typeof Lenis !== 'undefined') {
        lenis = new Lenis({ duration: 1.2, smooth: true });
        window.lenis = lenis;
        function raf(time) {
          lenis.raf(time);
          requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);
      }

      // GSAP INIT
      if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
        gsap.registerPlugin(ScrollTrigger);
      }
    });
  </script>
</body>
</html>

